<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: commonHead(#{login.page.title})}"></head>

<body class="bg-dark text-white">
  <div class="container text-center">
    <div class="row">
      <div class="col-md-4 offset-md-4">
        <h1 th:text="#{login.page.title}"></h1>
        <!--
          ログインフォーム
          - /login に POST（Spring Security が処理）
          - 下の CSRF トークンを含めることで Spring Security が POST を受け付ける
          - ユーザー名は事前チェックの結果で事前入力されることがある
        -->
        <form method="post" th:action="@{/login}">
          <!-- CSRF トークン（Spring により生成） -->
          <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden" />
          <div class="form-floating mb-3">
            <!-- ユーザー名: ユーザー名チェックから遷移する場合は readonly で事前入力される。必要なら編集可能に変更する -->
            <input class="form-control bg-dark text-white" id="floatingInput" name="username" placeholder="" readonly
              required th:value="${param.username}" type="text" />
            <label for="floatingInput" th:text="#{login.user.name}"></label>
          </div>
          <div class="form-floating mb-3">
            <!-- パスワード入力: 標準のユーザー名／パスワード認証フロー用 -->
            <input class="form-control bg-dark text-white" id="floatingPassword" name="password" placeholder="" required
              type="password" />
            <label for="floatingPassword" th:text="#{login.user.password}"></label>
          </div>
          <div>
            <button class="btn btn-primary mb-3" th:text="#{login.botton.submit}" type="submit"></button>
            <button class="btn btn-secondary mb-3" th:text="#{login.botton.clear}" type="reset"></button>
          </div>
          <!-- エラーメッセージ: param.error は Spring Security が設定する。'error' はコントローラが設定することがある -->
          <div th:if="${param.error}">
            <p style="color: red" th:text="#{login.error.login}"></p>
          </div>
          <div th:if="${error}">
            <p style="color: red" th:text="${error}"></p>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script src="/webjars/jquery/3.7.1/jquery.min.js"></script>
  <script src="/webjars/bootstrap/5.3.8/js/bootstrap.bundle.min.js"></script>
  <script src="/js/main.js"></script>
</body>

</html>
